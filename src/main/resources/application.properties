# Application properties for database connectivity.
# Credentials and sensitive values must be provided via environment variables.
# Do NOT hardcode secrets in this file or commit them to source control.

# Database connection (defaults provided where safe). Use environment variables
# to override values in your local/dev environment.
# Prefer standard Spring Boot env vars, fall back to DB_* compatibility vars and safe defaults
# Allow overriding via SPRING_DATASOURCE_URL / SPRING_DATASOURCE_USERNAME / SPRING_DATASOURCE_PASSWORD
spring.datasource.url=${SPRING_DATASOURCE_URL:${DB_URL:jdbc:postgresql://localhost:5432/traveloptimizer}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${DB_USERNAME:postgres}}
# DB password must come from environment variable; no default is provided for safety.
# Prefer SPRING_DATASOURCE_PASSWORD, fall back to DB_PASSWORD and POSTGRES_PASSWORD for convenience
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${DB_PASSWORD:${POSTGRES_PASSWORD:}}}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA settings (keep conservative defaults until persistence requirements decided)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.flyway.locations=classpath:db/migration

# Ensure Flyway runs before JPA/Hibernate initializes so schema validation
# happens against the migrated database.
spring.jpa.defer-datasource-initialization=true

# Logging
logging.level.root=INFO
logging.level.com.adriangarciao.traveloptimizer=DEBUG
spring.application.name=traveloptimizer
